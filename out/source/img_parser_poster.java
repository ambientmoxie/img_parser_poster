/* autogenerated by Processing revision 1276 on 2022-07-01 */
import processing.core.*;
import processing.data.*;
import processing.event.*;
import processing.opengl.*;

import java.util.HashMap;
import java.util.ArrayList;
import java.io.File;
import java.io.BufferedReader;
import java.io.PrintWriter;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.IOException;

public class img_parser_poster extends PApplet {

PGraphics main;
PGraphics seed;
PGraphics shapes_dict;
PGraphics copy_filter;
PGraphics lerp;

PImage seed_image;


int border;

float custom_width;
float custom_height;

 public void setup() {
    /* size commented out by preprocessor */; // A4 ratio

    /* pixelDensity commented out by preprocessor */;
    border = 30;
    
    main = createGraphics(width - border, height - border);
    seed = createGraphics(main.width, main.height);
    shapes_dict = createGraphics(main.width, main.height);
    copy_filter = createGraphics(main.width, main.height);
    lerp = createGraphics(main.width, main.height);

    seed_image = loadImage("seed_02.jpg");

}

 public void draw() {
    background(200);
    drawMain();
    drawSeed();
    drawShapesDict();
    drawCopyFilter();
    drawLerp();

    imageMode(CENTER);
    translate(width / 2, height / 2);
    image(main, 0, 0);
}

 public void drawMain(){
    main.beginDraw();
    main.background(255,0,0);
    main.image(seed, 0, 0, (main.width / 4) * 3, (main.height / 6) * 4);
    main.image(shapes_dict, 0, (main.height / 6) * 4, (main.width / 4) * 3, (main.height / 12) * 3);
    main.image(copy_filter, 0, (main.height / 12) * 11,(main.width / 4) * 3, main.height / 12);
    main.image(lerp, (main.width / 4) * 3, 0, main.width / 4 + 2, main.height);
    
    main.endDraw();
}

 public void drawSeed(){
    seed.beginDraw();
    seed.background(255,0,0);
    seed.image(seed_image, 0, 0, seed.width, seed.height);
    seed.endDraw();
}

 public void drawShapesDict(){
    shapes_dict.beginDraw();

    shapes_dict.clear();

    float per_row = 6; // number of square per row
    float per_column = 3; // number of square per column
    float amount = per_row * per_column;
    float shapes_w = shapes_dict.width / per_row;
    float shapes_h = shapes_dict.height / per_column;

    float col = 0;
    float row = 0;
    int index = 0;

    shapes_dict.translate(-shapes_w, 0);

    while (index < amount) {

        col += shapes_w;
        index++;
        shapes_dict.stroke(0 + index * 10);
        shapes_dict.fill(0 + index * 10);
        shapes_dict.rect(col,row, shapes_w, shapes_h);

        if(index % per_row == 0) {
            row += shapes_h;
            col = 0;
        }
    }

    shapes_dict.endDraw();
}

 public void drawCopyFilter() {
    copy_filter.beginDraw();
    
    float amount = 6;
    float shapes_w = copy_filter.width / amount;
    float shapes_h = copy_filter.height;

    float col = 0;
    int index = 0;

    copy_filter.translate(-shapes_w, 0);

    while (index < amount) {

        col += shapes_w;
        index++;
        copy_filter.stroke(0 + index * 10, 0, 0);
        copy_filter.fill(0 + index * 10, 0, 0);
        copy_filter.rect(col,0, shapes_w, shapes_h);
    }

    copy_filter.endDraw();
}

 public void drawLerp() {
    lerp.beginDraw();
    
    float amount = 6;
    float shapes_w = lerp.width;
    float shapes_h = lerp.height / amount;

    float row = 0;
    int index = 0;

    lerp.translate(0, -shapes_h);

    while (index < amount) {

        row += shapes_h;
        index++;
        lerp.stroke(0, 0 + index * 10, 0);
        lerp.fill(0, 0 + index * 10, 0);
        lerp.rect(0,row, shapes_w, shapes_h);
    }

    lerp.endDraw();
}

 public void keyPressed() {
    if (key == 's' || key == 'S') {
      save("export/export.tif");
      exit();
    }
}


  public void settings() { size(700, 990);
pixelDensity(2); }

  static public void main(String[] passedArgs) {
    String[] appletArgs = new String[] { "img_parser_poster" };
    if (passedArgs != null) {
      PApplet.main(concat(appletArgs, passedArgs));
    } else {
      PApplet.main(appletArgs);
    }
  }
}
